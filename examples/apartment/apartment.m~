% 
function apartment
clear set
close all
% plot the vehicle domain
% colors
colors=get(groot,'DefaultAxesColorOrder');

% load the symbolic set containig obstacles
obs=GridPoints('obstacles');
obs=unique(obs(:,[1 2]),'rows');
plot(obs(:,1),obs(:,2),'.');
hold on

target=GridPoints('target');
target=unique(target(:,[1 2]),'rows');
plot(target(:,1),target(:,2),'.','color',colors(2,:));
hold on

re_lazy=GridPoints('recomputation_lazy');
re_lazy=unique(re_lazy(:,[1,2]),'rows');
plot(re_lazy(:,1),re_lazy(:,2),'.','color',colors(2,:));

winDomain=StaticController('controller_scots2');
domain=winDomain.domain;
 for i=1:length(domain)
     x=domain(i,1)-0.1;
     y=domain(i,2)-0.1;
     rectangle('Position',[x y 0.2 0.2], 'FaceColor','red','EdgeColor','b');
 
hold on

winDomain_scots=StaticController('controller_global');
domain_scots=winDomain_scots.domain;
% for j=1:length(domain_scots)
%      x_s=domain_scots(j,1)-0.1;
%      y_s=domain_scots(j,2)-0.1;
%      rectangle('Position',[x_s y_s 0.2 0.2], 'FaceColor','red','EdgeColor','red');

hold on


% plot the real obstacles and target set
plot_domain

box on
axis([0 10 0 6])

%set(gcf,'paperunits','centimeters','paperposition',[0 0 16 10],'papersize',[16 6])

end



function plot_domain

colors=get(groot,'DefaultAxesColorOrder');


alpha=0.2;

v=[7.6 0;10 0;7.6 1.8; 10 1.8];
patch('vertices',v,'faces',[1 2 4 3],'facea', alpha ,'edgec',colors(2,:));
v=[4.2 0;7.4 0;4.2 1.8; 7.4 1.8];
patch('vertices',v,'faces',[1 2 4 3],'facea', alpha, 'facec',colors(3,:));

v=[9 0; 9.5  0; 9 0.5; 9.5 .5];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(2,:),'edgec',colors(2,:));


v=[4.0     0  ;4.2  0 ; 4.0  2 ; 4.2  2  ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[5     1.8;7.6  1.8   ; 5   2.0    ; 7.6 2.0   ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[4.0 3.4; 4.2 3.4; 4.0 6; 4.2 6];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[5 3.4; 7.6 3.4; 5 3.6; 7.6 3.6];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[7.4   0  ;7.6  0   ; 7.4   2.0   ; 7.6 2.0  ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[7.4   3.4  ;7.6  3.4   ; 7.4   6.0    ; 7.6  6.0   ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[8.4  1.8  ;10.0  1.8   ;8.4  2.0   ; 10.0  2.0  ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));
v=[8.4   3.4  ;10.0    3.4   ; 8.4   3.6    ; 10.0   3.6   ];
patch('vertices',v,'faces',[1 2 4 3],'facea',alpha,'facec',colors(1,:),'edgec',colors(1,:));

end
% % 
% 
% function PlotNice()
% if (strcmp(mode,'obstacles'))
%         figure('Units','inches',...
%             'OuterPosition',[0 0 10 6],...
%             'PaperPositionMode','auto');
%         [ha, pos] = tight_subplot(3, 2, 0.07, 0.06, 0.06);
%         set(ha, 'XTickLabelMode', 'auto')
%         set(ha, 'YTickLabelMode', 'auto')
%         cmap = colormap('gray');
%         color1 = cmap(1,:);
%         color2 = cmap(floor(size(cmap,1)/2),:);
%         red = [0.9373    0.2980    0.2980];
%         gray = [0.2471    0.2471    0.2471];
%         for ii=1:numAbs
%             disp(ii)
%             axes(ha(ii));
%             hold on;
%             T = SymbolicSet(['T/T' num2str(ii) '.bdd'],'projection',[1 2]);
%             C = SymbolicSet(['C/C' num2str(ii) '.bdd'],'projection',[1 2]);
%             try
% %                 s = subplot(3,numAbs/3,ii); hold on;
% %                 plotCells(T,'facecolor',red,'EdgeColor',red);
% %                 plotCells(C,'facecolor',gray,'EdgeColor',gray);
% 
%                 pT = T.points;
%                 pC = C.points;
%                 plot(pT(:,1),pT(:,2),'rs', 'MarkerSize', 10/ii);
%                 plot(pC(:,1),pC(:,2),'ks', 'MarkerSize', 10/ii);
% %                 set(s,...
% %                     'Units','normalized',...
% %                     'OuterPosition',[0 0 1 1],...
% %                     'YTick',0:2:12,...
% %                     'XTick',0:2:12,...
% %                     'FontUnits','points',...
% %                     'FontWeight','normal',...
% %                     'FontSize',9,...
% %                     'FontName','Times')
%                 axis([1.1 1.6 5.4 5.9]);
%                 title({['$L =' num2str(numAbs + 1 - ii) '$']},...
%                     'FontUnits','points',...
%                         'interpreter','latex',...
%                         'FontSize',14,...
%                         'FontName','Times');
%                 ylabel({'$x_2$'},...
%                         'FontUnits','points',...
%                         'interpreter','latex',...
%                         'FontSize',10,...
%                         'FontName','Times');%,...
%         %                 'Units','Normalized',...
%         %                 'Position',[-0.1,0.5,0])
%                 xlabel({'$x_1$'},...
%                         'FontUnits','points',...
%                         'interpreter','latex',...
%                         'FontSize',10,...
%                         'FontName','Times',...
%                         'Units','Normalized',...
% 'Position',[0.5,-0.05,0]);
%                 box on;
%             catch
%                 warning(['There are no points in T or C' num2str(ii)]);
%             end
%         end
% 
%         savefig('dcdc6A_cdc');
%         print -depsc dcdc6A_cdc.eps
%     end 
end